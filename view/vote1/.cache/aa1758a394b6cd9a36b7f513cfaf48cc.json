{"dependencies":[],"generated":{"js":"//吐司小插件,依赖于jquery\r\nvar toast = (function() {\r\n    //var currentScriptPath = document.currentScript.src;//获取当前脚本文件路径,有些手机例如红米不支持\r\n    var currentScriptPath = document.scripts[document.scripts.length - 1].src;//获取当前脚本文件路径\r\n    var loadImgPath = currentScriptPath.slice(0, currentScriptPath.lastIndexOf(\"/\")) + \"/wait.gif\";//获取菊花图的路径\r\n    var tipsEndCallback;\r\n    //动画消失移除div\r\n    var removeToast = function() {\r\n        //显示1s后关闭吐司\r\n        var narrowTimeout = setTimeout(function() {\r\n            //动画结束后移除div\r\n            $(\"#shadow\").bind(\"webkitAnimationEnd\",function(){\r\n                $(\"#shadow-box\").remove();\r\n                //如果有提示消失后的回调则执行\r\n                if(tipsEndCallback){\r\n                    tipsEndCallback();\r\n                    tipsEndCallback = null;//执行回调后置空,防止影响其他无回调提示\r\n                }\r\n            });\r\n            $(\"#shadow\").css(\"-webkit-animation\", \"narrow 350ms ease 1\");\r\n            clearTimeout(narrowTimeout);\r\n        }, 1000);\r\n    }\r\n    //转菊花\r\n    var loading = function() {\r\n        $(\"body\").append('<div id=\"shadow-box\"><div id=\"shadow\"><img src=\"' + loadImgPath + '\"/></div></div>');\r\n    }\r\n    //提示\r\n    //msg: 必选，提示信息\r\n    //calback: 可选，提示信息消失后的回调\r\n    var tips = function(msg, calback) {\r\n        $(\"body\").append('<div id=\"shadow-box\"><div id=\"shadow\" style=\"width:' + (msg.length + 2) + 'em\">' + msg + '</div></div>');\r\n        tipsEndCallback = calback || null;//赋值回调\r\n        removeToast();\r\n    }\r\n    //请求结果提示(前提是转菊花等待)\r\n    //msg: 必选，提示信息\r\n    //calback: 可选，提示信息消失后的回调\r\n    var result = function(msg, calback) {\r\n        $(\"#shadow\").css(\"width\", (msg.length + 2) + \"em\");\r\n        $(\"#shadow\").html(msg);\r\n        tipsEndCallback = calback || null;//赋值回调\r\n        removeToast();\r\n    }\r\n    return {\r\n        loading : loading,\r\n        tips : tips,\r\n        result : result,\r\n        remove: removeToast\r\n    }\r\n})()\r\n"},"hash":"2229234a4b342d66647469ef47aa7fc3"}